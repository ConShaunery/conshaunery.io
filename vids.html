<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>conshaunery.com / vids</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<style>
  :root {
    --bg-tile-size: 50%;
  }
  body {
    background: #000 url("./gifs/stars 11.gif") repeat;
    background-size: var(--bg-tile-size);
    color: #fff;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 16px;
    margin: 0;
  }

  /* Mute button */
  #muteBtn {
    position: fixed;
    top: 12px;
    right: 12px;
    z-index: 1000;
    background: rgba(0,0,0,0.55);
    color: #fff;
    border: 1px solid rgba(255,255,255,0.4);
    padding: 8px 12px;
    font-size: 18px;
    line-height: 1;
    cursor: pointer;
    border-radius: 6px;
    backdrop-filter: blur(3px);
    transition: background .25s, transform .25s, border-color .25s;
  }
  #muteBtn:hover {
    background: rgba(255,140,0,0.85);
    border-color: orange;
    transform: translateY(-2px);
  }
  #muteBtn:active { transform: scale(0.9); }

  .container {
    max-width: 1150px;
    margin: 0 auto;
    padding: 32px 20px 80px;
  }
  h1, h2, h3 {
    text-align: center;
    font-weight: bold;
    margin: 0 0 24px;
  }
  h1 { font-size: clamp(48px,8vw,84px); }

  a { color: orange; text-decoration: none; }
  a:hover { color: #fff; }

  .nav {
    text-align: center;
    margin-bottom: 28px;
  }
  .nav a {
    margin: 0 8px;
    font-weight: 600;
  }

  .bg-audio-status {
    text-align: center;
    font-size: 12px;
    opacity: 0.7;
    margin: 4px 0 30px;
  }

  /* Video Grid */
  .video-grid {
    display: grid;
    gap: 24px;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    align-items: start;
  }

  .video-card {
    background: rgba(255,255,255,0.06);
    padding: 10px 10px 16px;
    border: 1px solid rgba(255,255,255,0.18);
    border-radius: 10px;
    position: relative;
    backdrop-filter: blur(2px);
    box-shadow: 0 0 12px rgba(0,0,0,0.55);
    transition: transform .25s, box-shadow .25s, border-color .25s;
  }
  .video-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 18px rgba(0,0,0,0.75);
    border-color: orange;
  }
  .video-card h4 {
    margin: 8px 0 4px;
    font-size: 15px;
    text-align: center;
  }
  .video-card small {
    display: block;
    text-align: center;
    opacity: 0.6;
    font-size: 11px;
  }

  video, iframe {
    width: 100%;
    height: auto;
    background: #000;
    border: none;
    display: block;
    aspect-ratio: 4 / 3;
  }

  footer {
    margin-top: 70px;
    text-align: center;
    font-size: 11px;
    opacity: 0.75;
  }

  @media (max-width: 600px) {
    .container { padding: 28px 14px 70px; }
  }
</style>
</head>
<body>

<button id="muteBtn" aria-pressed="false" title="Mute background audio">ðŸ”Š</button>

<div class="container">
  <h1>[CS]</h1>

  <div class="nav">
    <a href="home.html">home</a>
    <a href="pics.html">pics</a>
    <a href="vids.html">vids</a>
    <a href="music.html">music</a>
    <a href="stream.html">stream</a>
    <a href="faq.html">faq</a>
    <a href="help.html">help</a>
  </div>

  <!-- Background Audio -->
  <audio id="bg-audio" autoplay loop preload="auto">
    <source src="./sounds/Adrianna Kirikl 02 Glitch.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
  <div class="bg-audio-status" id="bg-status">Background track: normal volume.</div>

  <h3>vhs vault</h3>
  <div class="video-grid">
    <div class="video-card">
      <h4>The Internet For Beginners (1998)</h4>
      <iframe
        src="https://archive.org/embed/theinternetforbeginners1998"
        title="The Internet For Beginners 1998"
        loading="lazy"
        allowfullscreen>
      </iframe>
      <small>archive.org embed</small>
    </div>
  </div>

  <h2 style="margin-top:60px;">my videos</h2>
  <div class="video-grid" id="my-videos">

    <!-- SAMPLE LOCAL VIDEOS - duplicate blocks as needed -->
    <div class="video-card">
      <h4>UFO Truth</h4>
      <video controls preload="none" data-title="UFO Truth">
        <source src="./vids/WATCH NOW!!! The Truth Revealed About UFOs!!!.mp4" type="video/mp4">
      </video>
      <small>Local clip</small>
    </div>

    <div class="video-card">
      <h4>Halo CE</h4>
      <video controls preload="none" data-title="Halo CE">
        <source src="./vids/haloce.mp4" type="video/mp4">
      </video>
    </div>

    <div class="video-card">
      <h4>Cat Harmonics</h4>
      <video controls preload="none" data-title="Cat Harmonics">
        <source src="./vids/cat_hermonics.mp4" type="video/mp4">
      </video>
    </div>

    <div class="video-card">
      <h4>German Cola</h4>
      <video controls preload="none" data-title="German Cola">
        <source src="./vids/germancola.mp4" type="video/mp4">
      </video>
    </div>

    <div class="video-card">
      <h4>Turkey</h4>
      <video controls preload="none" data-title="Turkey">
        <source src="./vids/turkey.mp4" type="video/mp4">
      </video>
    </div>

    <div class="video-card">
      <h4>Rubert</h4>
      <video controls preload="none" data-title="Rubert">
        <source src="./vids/rubert.mp4" type="video/mp4">
      </video>
    </div>

    <div class="video-card">
      <h4>Millkers</h4>
      <video controls preload="none" data-title="Millkers">
        <source src="./vids/millkers.mp4" type="video/mp4">
      </video>
    </div>

    <div class="video-card">
      <h4>Fotosynthasis</h4>
      <video controls preload="none" data-title="Fotosynthasis">
        <source src="./vids/fotosynthasis.mp4" type="video/mp4">
      </video>
    </div>

  </div>

  <footer>
    conshaunery was here.<br>
    <img src="./pictures/conshaun.jpg" alt="logo" width="50" height="50">
  </footer>
</div>

<script>
/* ===============================
   CONFIG
   =============================== */
const BASE_VOLUME = 0.6;      // Normal background music volume
const DUCK_VOLUME = 0.08;     // Volume while a video is playing
const FADE_MS = 500;          // Fade time in ms

/* ===============================
   ELEMENTS
   =============================== */
const bgAudio = document.getElementById('bg-audio');
const statusEl = document.getElementById('bg-status');
const muteBtn = document.getElementById('muteBtn');
const videos = Array.from(document.querySelectorAll('video'));

let targetVolume = BASE_VOLUME;
let fadeFrame = null;
let isMuted = localStorage.getItem('bgMuted') === 'true';

/* ===============================
   INIT
   =============================== */
bgAudio.volume = BASE_VOLUME;
if (isMuted) {
  bgAudio.muted = true;
  muteBtn.textContent = 'ðŸ”‡';
  muteBtn.setAttribute('aria-pressed','true');
} else {
  bgAudio.muted = false;
  muteBtn.textContent = 'ðŸ”Š';
  muteBtn.setAttribute('aria-pressed','false');
}

/* ===============================
   FADE / DUCK LOGIC
   =============================== */
function fadeTo(vol) {
  if (bgAudio.muted) return; // skip fading if muted
  targetVolume = vol;
  const startVol = bgAudio.volume;
  const startTime = performance.now();
  cancelAnimationFrame(fadeFrame);

  function step(now) {
    const t = Math.min(1, (now - startTime) / FADE_MS);
    bgAudio.volume = startVol + (targetVolume - startVol) * t;
    if (t < 1) fadeFrame = requestAnimationFrame(step);
  }
  fadeFrame = requestAnimationFrame(step);
}

function updateDuck() {
  const anyPlaying = videos.some(v => !v.paused && !v.ended);
  if (anyPlaying) {
    fadeTo(DUCK_VOLUME);
    statusEl.textContent = 'Background track: ducked while video plays.';
  } else {
    fadeTo(BASE_VOLUME);
    statusEl.textContent = 'Background track: normal volume.';
  }
}

/* Attach listeners to each video */
videos.forEach(v => {
  ['play','playing'].forEach(evt => v.addEventListener(evt, updateDuck));
  ['pause','ended','abort','error','emptied'].forEach(evt => v.addEventListener(evt, updateDuck));
});

/* ===============================
   MUTE TOGGLE
   =============================== */
muteBtn.addEventListener('click', () => {
  isMuted = !isMuted;
  bgAudio.muted = isMuted;
  localStorage.setItem('bgMuted', isMuted ? 'true' : 'false');
  muteBtn.textContent = isMuted ? 'ðŸ”‡' : 'ðŸ”Š';
  muteBtn.setAttribute('aria-pressed', isMuted ? 'true' : 'false');

  if (!isMuted) {
    // When unmuting, reflect current duck state
    updateDuck();
    muteBtn.animate([{transform:'scale(0.9)'},{transform:'scale(1)'}], {duration:180});
  }
});

/* In case user interacts late and autoplay was blocked */
document.addEventListener('click', () => {
  if (bgAudio.paused && !isMuted) {
    bgAudio.play().catch(()=>{});
  }
}, { once: true });
</script>

</body>
</html>
